import{$ as e}from"./jquery.min.js";window.$=e;window.jQuery=e;var C={},d={order:[],currentChunk:0},N={defaultLabel:"Выберите тип задаваемого вопроса",options:[{slug:"radio",text:"радио с 1 ответом"},{slug:"checkbox",text:"чекбокс с множественным ответом"},{slug:"num",text:"вопрос с вводом цифр"},{slug:"select",text:"выпадающий список"},{slug:"text",text:"текстовое поле"},{slug:"message",text:"вывод сообщения"},{slug:"pic",text:"вопрос с картинкой"},{slug:"sortable",text:"расстановка приоритетов"},{slug:"slider",text:"шкальный вопрос с «бегунком»"},{slug:"end",text:"конец опроса"}]};e(document).ready(function(){var l=e(".quiz__body");Z();function M(){e.ajax({url:"",type:"POST",data:JSON.stringify(C),cache:!1,timeout:3e4,dataType:"json",success:function(){L("Успешно!"),console.log(C),console.log(JSON.stringify(C))},error:function(){L("Ошибка!"),console.log(C),console.log(JSON.stringify(C))}})}function E(){var a=e("#main-select");a.append(e("<button>",{class:"quiz__select-btn",append:e("<span>",{class:"quiz__select-field",text:N.defaultLabel}).add("<svg>",{class:"quiz__select-btn-svg"})}).add("<ul>",{class:"quiz__select-options-list"}).add("<input>",{class:"quiz__hidden-input",name:"type",type:"text"}));for(var i=a.find(".quiz__select-btn"),r=i.find(".quiz__select-field"),s=a.find(".quiz__select-options-list"),n=a.find(".quiz__hidden-input"),t=N.options,q=0;q<t.length;q++)s.append(e("<li>",{class:"quiz__select-option","data-value":t[q].slug,text:" – "+t[q].text,prepend:e("<span>",{class:"quiz__select-accent",text:t[q].slug})}));var z=s.find(".quiz__select-option"),p="",o=function(){a.removeClass("quiz__select_opened")},_=function(){a.addClass("quiz__select_opened")};z.each(function(u,m){e(m).on("click",function(){var g=e(m).attr("data-value");n.val(g),n.trigger("change"),o()})}),n.on("change",function(){var u=n.val(),m,g;if(u!==""){r.empty(),p="";for(var b=0;b<t.length;b++)if(u===t[b].slug){m=t[b].slug,g=t[b].text;break}r.text(" – "+g).prepend(e("<span>",{class:"quiz__select-accent",text:m}))}else r.empty(),r.text(N.defaultLabel);p!==u&&u!==""&&(l.empty(),p=u,K(u))}),i.on("click",function(u){u.preventDefault(),a.hasClass("quiz__select_opened")?o():_()}),e(document).on("click",function(u){!a.is(u.target)&&a.has(u.target).length===0&&o()})}function G(a){var i=function(s,n){s.each(function(t,q){t!==n&&e(q).parent("label").removeClass(e(q).parent("label")[0].classList[0]+"_checked")})},r=function(s){s.length>0&&s.each(function(n,t){var q=e(t).find(".quiz__hidden-input");q.each(function(z,p){e(p).prop("checked")&&e(p).parent("label").addClass(e(p).parent("label")[0].classList[0]+"_checked"),e(p).off("change.my").on("change.my",function(){var o=e(p).parent("label"),_=o[0].classList[0],u=_+"_checked";_==="quiz__radio-label"&&i(q,z),e(p).prop("checked")?o.addClass(u):o.removeClass(u)})})})};r(e(".quiz__"+a))}function V(){var a=e(".quiz__answers-list"),i=function(s,n,t){s.append(e("<li>",{class:"quiz__answer",append:e("<input>",{class:"quiz__field quiz__field_first",type:"text",placeholder:n}).add(e("<input>",{class:"quiz__field quiz__field_last",type:"text",placeholder:t})).add(e("<button>",{class:"quiz__answer-btn"}))}))},r=function(s,n,t,q,z,p){t.off("keyup.my").on("keyup.my",function(){if(t.eq(0).val()===""&&t.eq(1).val()===""&&n.next(".quiz__answer").length!==0&&n.remove(),t.eq(0).val()!==""&&t.eq(1).val()!==""&&n.next(".quiz__answer").length===0){i(s,z,p);var o=s.find(".quiz__answer").eq(-1),_=o.children(".quiz__field"),u=o.find(".quiz__answer-btn");r(s,o,_,u,z,p)}}),q.off("click.my").on("click.my",function(){if(n.next(".quiz__answer").length===0){i(s,z,p);var o=s.find(".quiz__answer").eq(-1),_=o.children(".quiz__field"),u=o.find(".quiz__answer-btn");r(s,o,_,u,z,p)}else n.remove()})};a.length>0&&a.each(function(s,n){var t=e(n).find(".quiz__field_first").eq(0).prop("placeholder"),q=e(n).find(".quiz__field_last").eq(0).prop("placeholder");e(n).find(".quiz__answer").each(function(z,p){var o=e(p).children(".quiz__field"),_=e(p).find(".quiz__answer-btn");r(e(n),e(p),o,_,t,q)})})}function K(a){var i=e("<p>",{class:"quiz__label",text:"Варианты ответов"}).add(e("<ul>",{class:"quiz__answers-list","data-name":"poll",append:e("<li>",{class:"quiz__answer",append:e("<input>",{class:"quiz__field quiz__field_first",type:"text",placeholder:"цифра ответа"}).add(e("<input>",{class:"quiz__field quiz__field_last",type:"text",placeholder:"текст ответа"})).add(e("<button>",{class:"quiz__answer-btn"}))})})),r=e("<div>",{class:"quiz__column",append:e("<p>",{class:"quiz__label",text:"Можно ли пропустить вопрос?"}).add(e("<div>",{class:"quiz__radio-btns",append:e("<label>",{class:"quiz__radio-label",text:"Да",append:e("<input>",{type:"radio",name:"question-skip",class:"quiz__hidden-input",val:"y"})}).add(e("<label>",{class:"quiz__radio-label",text:"Нет",append:e("<input>",{type:"radio",name:"question-skip",class:"quiz__hidden-input",val:"n",checked:"checked"})}))}))}),s=e("<div>",{class:"quiz__column",append:e("<p>",{class:"quiz__label",text:"Можно ли вернуться на шаг назад?"}).add(e("<div>",{class:"quiz__radio-btns",append:e("<label>",{class:"quiz__radio-label",text:"Да",append:e("<input>",{type:"radio",name:"question-back",class:"quiz__hidden-input",val:"y"})}).add(e("<label>",{class:"quiz__radio-label",text:"Нет",append:e("<input>",{type:"radio",name:"question-back",class:"quiz__hidden-input",val:"n",checked:"checked"})}))}))});switch(l.append(e("<div>",{class:"quiz__row",append:e("<div>",{class:"quiz__column",append:e("<p>",{class:"quiz__label",text:"Тип вопроса"}).add("<div>",{class:"quiz__radio-btns",append:e("<label>",{class:"quiz__radio-label",text:"p",append:e("<input>",{class:"quiz__hidden-input",type:"radio",name:"question-type",value:"p",checked:"checked"})}).add("<label>",{class:"quiz__radio-label",text:"r",append:e("<input>",{class:"quiz__hidden-input",type:"radio",name:"question-type",value:"r"})})})}).add("<div>",{class:"quiz__column quiz__column_stretchy",append:e("<p>",{class:"quiz__label",text:"Номер вопроса"}).add("<input>",{class:"quiz__field",type:"text",name:"question-number"})})}).add(e("<p>",{class:"quiz__label",text:"Заголовок вопроса"})).add(e("<input>",{class:"quiz__field",type:"text",name:"question-title",placeholder:"title"})).add(e("<p>",{class:"quiz__label",text:"Описание вопроса"})).add(e("<input>",{class:"quiz__field",type:"text",name:"question-description",placeholder:"description"}))),a){case"radio":case"checkbox":case"select":l.append(i.add(e("<div>",{class:"quiz__row quiz__row_sb","data-name":"radio-btns",append:r.add(s).add(e("<div>",{class:"quiz__column",append:e("<p>",{class:"quiz__label",text:"Перемешать варианты ответов?"}).add(e("<div>",{class:"quiz__radio-btns",append:e("<label>",{class:"quiz__radio-label",text:"Да",append:e("<input>",{type:"radio",name:"question-random",class:"quiz__hidden-input",val:"y"})}).add(e("<label>",{class:"quiz__radio-label",text:"Нет",append:e("<input>",{type:"radio",name:"question-random",class:"quiz__hidden-input",val:"n",checked:"checked"})}))}))}))})).add(e("<p>",{class:"quiz__label",text:"ID ответов для которых нужно дополнительное текстовое поле"})).add(e("<input>",{class:"quiz__field",type:"text",name:"question-text"}))),V();break;case"sortable":case"slider":l.append(i.add(e("<div>",{class:"quiz__row quiz__row_sb","data-name":"radio-btns",append:r.add(s).add(e("<div>",{class:"quiz__column",append:e("<p>",{class:"quiz__label",text:"Перемешать варианты ответов?"}).add(e("<div>",{class:"quiz__radio-btns",append:e("<label>",{class:"quiz__radio-label",text:"Да",append:e("<input>",{type:"radio",name:"question-random",class:"quiz__hidden-input",val:"y"})}).add(e("<label>",{class:"quiz__radio-label",text:"Нет",append:e("<input>",{type:"radio",name:"question-random",class:"quiz__hidden-input",val:"n",checked:"checked"})}))}))}))}))),V();break;case"num":l.append(e("<p>",{class:"quiz__label",text:"Правила ответов"}).add(e("<ul>",{class:"quiz__answers-list","data-name":"rule",append:e("<li>",{class:"quiz__answer",append:e("<input>",{class:"quiz__field quiz__field_first",type:"text",placeholder:"число"}).add(e("<input>",{class:"quiz__field quiz__field_last",type:"text",placeholder:"id вопроса"})).add(e("<button>",{class:"quiz__answer-btn"}))})})).add(e("<div>",{class:"quiz__row quiz__row_sb","data-name":"radio-btns",append:r.add(s)}))),V();break;case"text":l.append(e("<div>",{class:"quiz__row quiz__row_sb","data-name":"radio-btns",append:r.add(s)}));break;case"message":l.append(e("<p>",{class:"quiz__label",text:"Текст сообщения"}).add(e("<input>",{class:"quiz__field",type:"text",name:"question-message",placeholder:"message"})).add(e("<div>",{class:"quiz__row quiz__row_sb","data-name":"radio-btns",append:r.add(s)})));break;case"pic":l.append(i.add(e("<p>",{class:"quiz__label",text:"Картинки ответов"}).add(e("<ul>",{class:"quiz__answers-list","data-name":"pic",append:e("<li>",{class:"quiz__answer",append:e("<input>",{class:"quiz__field quiz__field_first",type:"text",placeholder:"цифра ответа"}).add(e("<input>",{class:"quiz__field quiz__field_last",type:"text",placeholder:"ссылка на картинку ответа"})).add(e("<button>",{class:"quiz__answer-btn"}))})})).add(e("<div>",{class:"quiz__row quiz__row_sb","data-name":"radio-btns",append:r.add(s)})))),V();break;case"end":l.append(e("<p>",{class:"quiz__label",text:"Текст кнопки"}).add(e("<input>",{class:"quiz__field",type:"text",name:"question-message",placeholder:"message"})).add(e("<p>",{class:"quiz__label",text:"Ссылка кнопки"}).add(e("<input>",{class:"quiz__field",type:"text",name:"question-url",placeholder:"url"}))).add(e("<div>",{class:"quiz__row quiz__row_sb","data-name":"radio-btns",append:r.add(s)})));break}G("radio-btns")}function H(){var a={},i={},r=e('input[name="type"]').val();if(i.status="success",i.errors=[],r!==""&&r!==void 0){var s=l.find('input[name="question-type"]:checked'),n=l.find('input[name="question-number"]').val().replace(/\D/g,""),t;switch(s.length!==1?(i.status="error",i.errors.push("Тип вопроса выбран с ошибкой, или не выбран вовсе")):t=s.val(),n.length<1&&(i.status="error",i.errors.push("Номер вопроса указан неверно")),a.type=r,a.title=l.find('input[name="question-title"]').val(),a.description=l.find('input[name="question-description"]').val(),r){case"radio":case"checkbox":case"select":var D=l.find('.quiz__answers-list[data-name="poll"]'),T=D.find(".quiz__answer"),c={},o=[],h=l.find('div[data-name="radio-btns"]'),k=h.find('input[name="question-skip"]:checked'),v=h.find('input[name="question-back"]:checked'),_=h.find('input[name="question-random"]:checked'),q=l.find('input[name="question-text"]').val();T.each(function(F,y){var x=e(y).find(".quiz__field_first").val().replace(/\D/g,""),w=e(y).find(".quiz__field_last").val();x!==""&&w!==""&&(c["id"+x]=w)});var b=0;for(var z in c)b++;b===0?(i.status="error",i.errors.push("Должен быть хотя бы один вариант ответа")):a.poll=c,k.length!==1?(i.status="error",i.errors.push("Возможность пропустить вопрос выбрана с ошибкой, или не выбрана вовсе")):k.val()==="y"?a.skip="1":a.skip="0",v.length!==1?(i.status="error",i.errors.push("Возможность вернуться назад выбрана с ошибкой, или не выбрана вовсе")):v.val()==="y"?a.back="1":a.back="0",_.length!==1?(i.status="error",i.errors.push("Возможность перемешать варианты ответов выбрана с ошибкой, или не выбрана вовсе")):_.val()==="y"?a.random="true":a.random="false";var p=q.match(/id\d{1,}/g);p!==null&&(o=p),a.text=o;break;case"sortable":case"slider":var D=l.find('.quiz__answers-list[data-name="poll"]'),T=D.find(".quiz__answer"),c={},o=[],h=l.find('div[data-name="radio-btns"]'),k=h.find('input[name="question-skip"]:checked'),v=h.find('input[name="question-back"]:checked'),_=h.find('input[name="question-random"]:checked');T.each(function(F,y){var x=e(y).find(".quiz__field_first").val().replace(/\D/g,""),w=e(y).find(".quiz__field_last").val();x!==""&&w!==""&&(c["id"+x]=w)});var b=0;for(var z in c)b++;b===0?(i.status="error",i.errors.push("Должен быть хотя бы один вариант ответа")):a.poll=c,k.length!==1?(i.status="error",i.errors.push("Возможность пропустить вопрос выбрана с ошибкой, или не выбрана вовсе")):k.val()==="y"?a.skip="1":a.skip="0",v.length!==1?(i.status="error",i.errors.push("Возможность вернуться назад выбрана с ошибкой, или не выбрана вовсе")):v.val()==="y"?a.back="1":a.back="0",_.length!==1?(i.status="error",i.errors.push("Возможность перемешать варианты ответов выбрана с ошибкой, или не выбрана вовсе")):_.val()==="y"?a.random="true":a.random="false";break;case"num":var u=l.find('.quiz__answers-list[data-name="rule"]'),m=u.find(".quiz__answer"),g={},h=l.find('div[data-name="radio-btns"]'),k=h.find('input[name="question-skip"]:checked'),v=h.find('input[name="question-back"]:checked');m.each(function(F,y){var x=e(y).find(".quiz__field_first").val().replace(/\D/g,""),w=e(y).find(".quiz__field_last").val().match(/p\d{1,}/g);x!==""&&w!==null&&(g[x]=w[0])});var b=0;for(var z in g)b++;b===0?(i.status="error",i.errors.push("Должно быть хотя бы одно правило")):a.rule=g,k.length!==1?(i.status="error",i.errors.push("Возможность пропустить вопрос выбрана с ошибкой, или не выбрана вовсе")):k.val()==="y"?a.skip="1":a.skip="0",v.length!==1?(i.status="error",i.errors.push("Возможность вернуться назад выбрана с ошибкой, или не выбрана вовсе")):v.val()==="y"?a.back="1":a.back="0";break;case"text":var h=l.find('div[data-name="radio-btns"]'),k=h.find('input[name="question-skip"]:checked'),v=h.find('input[name="question-back"]:checked');k.length!==1?(i.status="error",i.errors.push("Возможность пропустить вопрос выбрана с ошибкой, или не выбрана вовсе")):k.val()==="y"?a.skip="1":a.skip="0",v.length!==1?(i.status="error",i.errors.push("Возможность вернуться назад выбрана с ошибкой, или не выбрана вовсе")):v.val()==="y"?a.back="1":a.back="0";break;case"message":var S=l.find('input[name="question-message"]').val(),h=l.find('div[data-name="radio-btns"]'),k=h.find('input[name="question-skip"]:checked'),v=h.find('input[name="question-back"]:checked');S===""?(i.status="error",i.errors.push("Сообщение должно быть непустым")):a.message=S,k.length!==1?(i.status="error",i.errors.push("Возможность пропустить вопрос выбрана с ошибкой, или не выбрана вовсе")):k.val()==="y"?a.skip="1":a.skip="0",v.length!==1?(i.status="error",i.errors.push("Возможность вернуться назад выбрана с ошибкой, или не выбрана вовсе")):v.val()==="y"?a.back="1":a.back="0";break;case"pic":var D=l.find('.quiz__answers-list[data-name="poll"]'),T=D.find(".quiz__answer"),J=l.find('.quiz__answers-list[data-name="pic"]'),f=J.find(".quiz__answer"),c={},Y={},h=l.find('div[data-name="radio-btns"]'),k=h.find('input[name="question-skip"]:checked'),v=h.find('input[name="question-back"]:checked');T.each(function(F,y){var x=e(y).find(".quiz__field_first").val().replace(/\D/g,""),w=e(y).find(".quiz__field_last").val();x!==""&&w!==""&&(c["id"+x]=w)}),f.each(function(F,y){var x=e(y).find(".quiz__field_first").val(),w=e(y).find(".quiz__field_last").val();x!==""&&w!==""&&(Y["id"+x]=w)});var $=0;for(var z in c)$++;$===0?(i.status="error",i.errors.push("Должен быть хотя бы один вариант ответа")):a.poll=c,a.pic=Y,k.length!==1?(i.status="error",i.errors.push("Возможность пропустить вопрос выбрана с ошибкой, или не выбрана вовсе")):k.val()==="y"?a.skip="1":a.skip="0",v.length!==1?(i.status="error",i.errors.push("Возможность вернуться назад выбрана с ошибкой, или не выбрана вовсе")):v.val()==="y"?a.back="1":a.back="0";break;case"end":var S=l.find('input[name="question-message"]').val(),j=l.find('input[name="question-url"]').val(),h=l.find('div[data-name="radio-btns"]'),k=h.find('input[name="question-skip"]:checked'),v=h.find('input[name="question-back"]:checked');S===""?(i.status="error",i.errors.push("Поле с сообщением не должно быть пустым")):a.message=S,j===""?(i.status="error",i.errors.push("Поле с ссылкой не должно быть пустым")):a.url=j,k.length!==1?(i.status="error",i.errors.push("Возможность пропустить вопрос выбрана с ошибкой, или не выбрана вовсе")):k.val()==="y"?a.skip="1":a.skip="0",v.length!==1?(i.status="error",i.errors.push("Возможность вернуться назад выбрана с ошибкой, или не выбрана вовсе")):v.val()==="y"?a.back="1":a.back="0";break}}else i.status="empty";t!==void 0&&n!==void 0&&(i.slug=t+n);for(var B=0;B<d.order.length;B++)if(d.order[B]===i.slug&&d.order[d.currentChunk]!==d.order[B]){i.status="error",i.errors.push("Вопрос "+i.slug+" уже был Вами сформирован");break}return i.status==="success"&&(d.order[d.currentChunk]!==void 0?(delete C[d.order[d.currentChunk]],C[i.slug]=a,d.order.splice(d.currentChunk,1,i.slug)):(C[i.slug]=a,d.order.push(i.slug))),i}function U(){var a=d.order[d.currentChunk],i=a.substr(0,1),r=a.substr(1),s=C[a];switch(i==="r"?e('input[name="question-type"][value="r"]').prop("checked","checked").trigger("change"):i==="p"&&e('input[name="question-type"][value="p"]').prop("checked","checked").trigger("change"),e('input[name="question-number"]').val(r),e('input[name="question-title"]').val(s.title),e('input[name="question-description"]').val(s.description),s.type){case"radio":case"checkbox":case"select":var _=e('ul[data-name="poll"]'),u=_.find(".quiz__answer"),m=u.find(".quiz__field_first").prop("placeholder"),g=u.find(".quiz__field_last").prop("placeholder");for(var n in s.poll)u.before(e("<li>",{class:"quiz__answer",append:e("<input>",{class:"quiz__field quiz__field_first",type:"text",placeholder:m,val:n.substr(2)}).add("<input>",{class:"quiz__field quiz__field_last",type:"text",placeholder:g,val:s.poll[n]}).add("<button>",{class:"quiz__answer-btn"})}));V();var f=s.skip,c=s.back,p=s.random;f==="1"?e('input[name="question-skip"][value="y"]').prop("checked","checked").trigger("change"):f==="0"&&e('input[name="question-skip"][value="n"]').prop("checked","checked").trigger("change"),c==="1"?e('input[name="question-back"][value="y"]').prop("checked","checked").trigger("change"):c==="0"&&e('input[name="question-back"][value="n"]').prop("checked","checked").trigger("change"),p==="true"?e('input[name="question-random"][value="y"]').prop("checked","checked").trigger("change"):p==="false"&&e('input[name="question-random"][value="n"]').prop("checked","checked").trigger("change");for(var t=s.text,q="",z=0;z<t.length;z++)z!==t.length-1?q+=t[z]+", ":q+=t[z];e('input[name="question-text"]').val(q);break;case"sortable":case"slider":var _=e('ul[data-name="poll"]'),u=_.find(".quiz__answer"),m=u.find(".quiz__field_first").prop("placeholder"),g=u.find(".quiz__field_last").prop("placeholder");for(var n in s.poll)u.before(e("<li>",{class:"quiz__answer",append:e("<input>",{class:"quiz__field quiz__field_first",type:"text",placeholder:m,val:n.substr(2)}).add("<input>",{class:"quiz__field quiz__field_last",type:"text",placeholder:g,val:s.poll[n]}).add("<button>",{class:"quiz__answer-btn"})}));V();var f=s.skip,c=s.back,p=s.random;f==="1"?e('input[name="question-skip"][value="y"]').prop("checked","checked").trigger("change"):f==="0"&&e('input[name="question-skip"][value="n"]').prop("checked","checked").trigger("change"),c==="1"?e('input[name="question-back"][value="y"]').prop("checked","checked").trigger("change"):c==="0"&&e('input[name="question-back"][value="n"]').prop("checked","checked").trigger("change"),p==="true"?e('input[name="question-random"][value="y"]').prop("checked","checked").trigger("change"):p==="false"&&e('input[name="question-random"][value="n"]').prop("checked","checked").trigger("change");break;case"num":var o=e('ul[data-name="rule"]'),u=o.find(".quiz__answer"),m=u.find(".quiz__field_first").prop("placeholder"),g=u.find(".quiz__field_last").prop("placeholder");for(var n in s.rule)u.before(e("<li>",{class:"quiz__answer",append:e("<input>",{class:"quiz__field quiz__field_first",type:"text",placeholder:m,val:n}).add("<input>",{class:"quiz__field quiz__field_last",type:"text",placeholder:g,val:s.rule[n]}).add("<button>",{class:"quiz__answer-btn"})}));V();var f=s.skip,c=s.back;f==="1"?e('input[name="question-skip"][value="y"]').prop("checked","checked").trigger("change"):f==="0"&&e('input[name="question-skip"][value="n"]').prop("checked","checked").trigger("change"),c==="1"?e('input[name="question-back"][value="y"]').prop("checked","checked").trigger("change"):c==="0"&&e('input[name="question-back"][value="n"]').prop("checked","checked").trigger("change");break;case"text":var f=s.skip,c=s.back;f==="1"?e('input[name="question-skip"][value="y"]').prop("checked","checked").trigger("change"):f==="0"&&e('input[name="question-skip"][value="n"]').prop("checked","checked").trigger("change"),c==="1"?e('input[name="question-back"][value="y"]').prop("checked","checked").trigger("change"):c==="0"&&e('input[name="question-back"][value="n"]').prop("checked","checked").trigger("change");break;case"message":e('input[name="question-message"]').val(s.message);var f=s.skip,c=s.back;f==="1"?e('input[name="question-skip"][value="y"]').prop("checked","checked").trigger("change"):f==="0"&&e('input[name="question-skip"][value="n"]').prop("checked","checked").trigger("change"),c==="1"?e('input[name="question-back"][value="y"]').prop("checked","checked").trigger("change"):c==="0"&&e('input[name="question-back"][value="n"]').prop("checked","checked").trigger("change");break;case"pic":var _=e('ul[data-name="poll"]'),u=_.find(".quiz__answer"),m=u.find(".quiz__field_first").prop("placeholder"),g=u.find(".quiz__field_last").prop("placeholder"),b=e('ul[data-name="pic"]'),D=b.find(".quiz__answer"),T=D.find(".quiz__field_first").prop("placeholder"),J=D.find(".quiz__field_last").prop("placeholder");for(var n in s.poll)u.before(e("<li>",{class:"quiz__answer",append:e("<input>",{class:"quiz__field quiz__field_first",type:"text",placeholder:m,val:n.substr(2)}).add("<input>",{class:"quiz__field quiz__field_last",type:"text",placeholder:g,val:s.poll[n]}).add("<button>",{class:"quiz__answer-btn"})}));for(var n in s.pic)D.before(e("<li>",{class:"quiz__answer",append:e("<input>",{class:"quiz__field quiz__field_first",type:"text",placeholder:T,val:n.substr(2)}).add("<input>",{class:"quiz__field quiz__field_last",type:"text",placeholder:J,val:s.pic[n]}).add("<button>",{class:"quiz__answer-btn"})}));V();var f=s.skip,c=s.back;f==="1"?e('input[name="question-skip"][value="y"]').prop("checked","checked").trigger("change"):f==="0"&&e('input[name="question-skip"][value="n"]').prop("checked","checked").trigger("change"),c==="1"?e('input[name="question-back"][value="y"]').prop("checked","checked").trigger("change"):c==="0"&&e('input[name="question-back"][value="n"]').prop("checked","checked").trigger("change");break;case"end":e('input[name="question-message"]').val(s.message),e('input[name="question-url"]').val(s.url);var f=s.skip,c=s.back;f==="1"?e('input[name="question-skip"][value="y"]').prop("checked","checked").trigger("change"):f==="0"&&e('input[name="question-skip"][value="n"]').prop("checked","checked").trigger("change"),c==="1"?e('input[name="question-back"][value="y"]').prop("checked","checked").trigger("change"):c==="0"&&e('input[name="question-back"][value="n"]').prop("checked","checked").trigger("change");break}}function L(a){var i="";if(typeof a=="string")i=a;else if(typeof a=="object")for(var r=0;r<a.length;r++)i+=a[r],r!==a.length-1&&(i+="<br>");if(e(".popup-wrapper").length===0){var s=function(){e(".popup-wrapper").css({opacity:0}),e(".popup").css({transform:"translateY(100px)"}),setTimeout(function(){e(".popup-wrapper").remove()},200)};e("body").append(e("<div>",{class:"popup-wrapper",append:e("<div>",{class:"popup",append:e("<button>",{class:"popup__close-btn"}).add(e("<div>",{class:"popup__text",html:i}))})})),setTimeout(function(){e(".popup-wrapper").css({opacity:1}),e(".popup").css({transform:"translateY(0)"})},100),e(".popup").off("click.my").on("click.my",function(n){n.stopPropagation()}),e(".popup__close-btn").off("click.my").on("click.my",s),e(".popup-wrapper").off("click.my").on("click.my",s)}}function W(a){a==="down"?l.css({opacity:0,transform:"translate(0,100px)",transition:"all 0.2s ease"}):a==="up"?l.css({opacity:0,transform:"translate(0,-100px)",transition:"all 0.2s ease"}):a==="left"?l.css({opacity:0,transform:"translate(-100px,0)",transition:"all 0.2s ease"}):a==="right"&&l.css({opacity:0,transform:"translate(100px,0)",transition:"all 0.2s ease"}),setTimeout(function(){l.css({transition:"unset"})},200)}function X(a){a==="down"?l.css({transform:"translate(0,-100px)"}):a==="up"?l.css({transform:"translate(0,100px)"}):a==="left"?l.css({transform:"translate(100px,0)"}):a==="right"&&l.css({transform:"translate(-100px,0)"}),setTimeout(function(){l.css({opacity:1,transition:"all 0.2s ease",transform:"translate(0)"}),setTimeout(function(){l.removeAttr("style")},200)},200)}function O(a){var i=e(".quiz__footer .quiz__buttons .quiz__btn");i.each(function(r,s){e(s).prop("disabled",!0)}),setTimeout(function(){i.each(function(r,s){e(s).prop("disabled",!1)})},a)}function Q(){var a=e("#main-select").find(".quiz__hidden-input");l.empty(),a.val(""),a.trigger("change")}function I(a){var i="",r=e("#main-select").find(".quiz__hidden-input");d.order[d.currentChunk]!==void 0&&(i=C[d.order[d.currentChunk]].type),W(a),setTimeout(function(){l.empty().scrollTop(0),r.val(i),r.trigger("change"),i!==""&&U(),X(a)},200)}function Z(){E();var a=e(".quiz__buttons"),i=a.find(".quiz__btn_prev"),r=a.find(".quiz__btn_next"),s=a.find(".quiz__btn_delete"),n=a.find(".quiz__btn_save");r.on("click",function(){var t=H();t.status==="success"?(d.currentChunk++,I("left"),O(600)):t.status==="empty"?L("Чтобы продолжить заполните информацию по вопросу"):t.status==="error"&&L(t.errors)}),i.on("click",function(){if(d.currentChunk>0){var t=H();t.status==="success"||t.status==="empty"?(d.currentChunk--,I("right"),O(600)):t.status==="error"&&L(t.errors)}else L("Вы находитесь на начальном вопросе")}),s.on("click",function(){d.currentChunk!==0?d.order[d.currentChunk]!==void 0?(delete C[d.order[d.currentChunk]],d.order.splice(d.currentChunk,1),d.currentChunk--,I("right"),O(600)):(d.currentChunk--,I("right"),O(600)):(d.order[d.currentChunk]!==void 0&&(delete C[d.order[d.currentChunk]],d.order.splice(d.currentChunk,1,void 0)),Q())}),n.on("click",function(){var t=H();t.status==="success"||t.status==="empty"?M():t.status==="error"&&L(t.errors)})}});
